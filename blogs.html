<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blogs</title>

    <!-- font awesome cdn link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- custom css file link  -->
    <link rel="stylesheet" href="css/style.css">

</head>
<body>
    
<!-- navbar section starts  -->

<nav class="navbar">
    <a href="./"> <i class="fas fa-home"></i> <span>home</span> </a>
    <a href="about.html"> <i class="fas fa-user"></i> <span>about</span> </a>
    <a href="portfolio.html"> <i class="fas fa-briefcase"></i> <span>portfolio</span> </a>
    <a href="blogs.html"> <i class="fas fa-blog"></i> <span>blogs</span> </a>
    <a href="contact.html"> <i class="fas fa-address-book"></i> <span>contact</span> </a>
</nav>

<!-- navbar section ends -->

<!-- blogs section starts  -->

<section class="blogs">

    <h1 class="heading"> <span>my</span> blogs </h1>

    <div class="box-container">

    </div>

</section>

<!-- blogs section ends -->

</body>
<script src="./js/jquery-3.6.0.js"></script>
<script>
    $(document).ready(function(){
        var i;
        var j = 1;
        for (i = 0; i < 1; i) {
            var urlstring = './blogs/blog-news/blog-'+j+'.html';
            if(doesFileExist(urlstring)){
                getajax(urlstring,j);
                j++;
            }else{
                break;
            }
            
        }

        function getajax(urlToFile,j) {
            $.get(urlToFile, function(data, status){

                var datastring = data;
                datastring = datastring.split('==='); // split into array

                console.log(datastring);

                var title = datastring[0];
                var image = datastring[1];
                image = image.replace('../.','');
                var description = datastring[2];
                var date = datastring[4];
                

                // console.log("Data: " + data + "\nStatus: " + status);
                // console.log("Title: " + title + "\n\nImage: " + image + "\n\nDescription: " + description + "\n\nContent: " + content);

                var allbox;
                allbox = '<div class="box">'+image+'<div class="content"><div class="icons"><a href="#"> <i class="fas fa-calendar"></i> '+date+' </a><a href="#"> <i class="fas fa-user"></i> by admin </a></div>'+title+'<p>'+description+'</p><a href="./blogs/single.html?page=blog-'+j+'" class="btn"> read more <i class="fas fa-link"></i></a></div></div>'
                $('.blogs .box-container').prepend(allbox);
            });
        };
        
        function doesFileExist(urlToFile) {
            var xhr = new XMLHttpRequest();
            xhr.open('HEAD', urlToFile, false);
            xhr.send();
            
            if (xhr.status == "404") {
                return false;
            } else {
                return true;
            }
        };
    })
</script>
</html>
